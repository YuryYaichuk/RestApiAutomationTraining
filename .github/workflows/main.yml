name: Test Rest API
on: workflow_dispatch
jobs:
    run-and-test:
        name: run and test
        runs-on: ubuntu-latest
        steps:

          - name: Pull docker image
            run: docker pull coherentsolutions/rest-training:2.0

          - name: Run application from Docker image
            run: docker run -d -p 8082:8082 coherentsolutions/rest-training:2.0
          
          - uses: actions/checkout@v4
          - name: Setup .NET Core
            uses: actions/setup-dotnet@v3
            with:
                dotnet-version: 7.0.

          - name: Install dependencies
            run: dotnet restore
      
          - name: Build
            run: dotnet build --configuration Release --no-restore
    
          - name: Test
            run: dotnet test --no-restore --verbosity norma

